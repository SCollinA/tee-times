(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(49)},35:function(e,t,a){},4:function(e,t,a){"use strict";(function(e){a.d(t,"h",function(){return c}),a.d(t,"b",function(){return j}),a.d(t,"i",function(){return _}),a.d(t,"j",function(){return k}),a.d(t,"k",function(){return C}),a.d(t,"r",function(){return L}),a.d(t,"a",function(){return M}),a.d(t,"n",function(){return U}),a.d(t,"p",function(){return P}),a.d(t,"o",function(){return A}),a.d(t,"q",function(){return R}),a.d(t,"m",function(){return I}),a.d(t,"l",function(){return H}),a.d(t,"c",function(){return q}),a.d(t,"g",function(){return x}),a.d(t,"f",function(){return J}),a.d(t,"e",function(){return Y});var n=a(13),r=a(2),i=a(15);setInterval(function(){W.dispatch(F(new Date))},6e4);var c=function(e,t){return e||(t.getMinutes()%10!==0&&t.setMinutes(t.getMinutes()+(10-t.getMinutes()%10)),t.getHours()>=16&&(t.setDate(t.getDate()+1),t.setHours(8),t.setMinutes(0)),t.getHours()<8&&(t.setHours(8),t.setMinutes(0))),{year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),dayOfTheWeek:t.getDay(),hours:t.getHours(),minutes:t.getMinutes()}},u={currentDate:new Date,data:{user:{},userFriends:[],userTeeTimes:[],allUsers:[],allTeeTimes:[]},isAdmin:!1,selectedTeeTime:{_id:"",teeType:"",date:"",golfers:[],guests:0},friendSearchTerm:"",isSearching:!1,teeTimeSearch:{teeType:"walk",date:Object(r.a)({},c(!1,new Date)),golfers:[],guests:0},isLoading:!1},s={type:"ADD_USER"},o={type:"ADD_TEE_TIME"},l={type:"LOGIN_USER"},m={type:"LOGOUT_USER"},d={type:"REQUEST_DATA"},f={type:"RECEIVE_DATA"},h={type:"UPDATE_USER"},p={type:"SELECT_TEE_TIME"},g={type:"UPDATE_TIME"},T={type:"UPDATE_TEE_TIME"},E={type:"UPDATE_FRIEND_SEARCH"},y={type:"UPDATE_TEE_TIME_SEARCH"},v={type:"SEARCH_TEE_TIMES"},b={type:"REQUEST_FRIEND"},S={type:"APPROVE_FRIEND"},w={type:"DENY_FRIEND"},O={type:"DELETE_USER"},D={type:"DELETE_TEE_TIME"},j=function(e){return fetch("".concat("","/register"),{method:"post",credentials:"include",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return W.dispatch(N(e))}),Object(r.a)({},s,{isLoading:!0})},_=function(e){return fetch("".concat("","/login"),{method:"post",credentials:"include",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return W.dispatch(N(e))}),Object(r.a)({},l,{isLoading:!0})},k=function(){return fetch("".concat("","/logout"),{method:"get",credentials:"include"}).then(function(e){return e.json()}).then(function(e){return W.dispatch(N(e))}),Object(r.a)({},m,{isLoading:!0})},C=function(){return fetch("".concat("","/data"),{method:"get",credentials:"include"}).then(function(e){return e.json()}).then(function(e){return W.dispatch(N(e))}),Object(r.a)({},d,{isLoading:!0})},N=function(t){var a=t.allUsers.filter(function(e){return e._id!==t.user._id&&(t.user.friends&&t.user.friends.find(function(t){return e._id===t}))});return Object(r.a)({},f,{data:Object(r.a)({},t,{user:Object(r.a)({},t.user,{pictureSrc:t.user.picture&&"data:image/png;base64,".concat(btoa(e.from(t.user.picture.data)))}),userFriends:a,allUsers:Object(n.a)(t.allUsers.map(function(t){return Object(r.a)({},t,{pictureSrc:t.picture&&"data:image/png;base64,".concat(btoa(e.from(t.picture.data)))})}))}),isLoading:!1})},L=function(e){return fetch("".concat("","/updateUser"),{method:"post",credentials:"include",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return W.dispatch(N(e))}),Object(r.a)({},h,{isLoading:!0})},F=function(e){return Object(r.a)({},g,{currentDate:e})},M=function(e){return fetch("".concat("","/teetime"),{method:"post",credentials:"include",body:JSON.stringify({teeTime:e}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return W.dispatch(N(e))}),Object(r.a)({},o,{isLoading:!0})},U=function(e){var t=new Date(e.date),a=Object(r.a)({},e,{date:{year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),hours:t.getHours(),minutes:t.getMinutes()}});return Object(r.a)({},p,{teeTime:a})},P=function(e){return fetch("".concat("","/updateTeeTime"),{method:"post",credentials:"include",body:JSON.stringify({teeTime:e}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return W.dispatch(N(e))}),Object(r.a)({},T,{isLoading:!0})},A=function(e){return Object(r.a)({},E,{friendSearchTerm:e})},R=function(e){return Object(r.a)({},y,{teeTimeSearch:e})},I=function(){return Object(r.a)({},v)},H=function(e){return fetch("".concat("","/requestFriend"),{method:"post",credentials:"include",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return W.dispatch(N(e))}),Object(r.a)({},b,{isLoading:!0})},q=function(e){return console.log(e),fetch("".concat("","/approveFriend"),{method:"post",credentials:"include",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return W.dispatch(N(e))}),Object(r.a)({},S,{isLoading:!0})},x=function(e){return fetch("".concat("","/denyFriend"),{method:"post",credentials:"include",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return W.dispatch(N(e))}),Object(r.a)({},w,{isLoading:!0})},J=function(e){return fetch("".concat("","/user"),{method:"delete",credentials:"include",body:JSON.stringify({user:e}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return W.dispatch(N(e))}),Object(r.a)({},O,{isLoading:!0})},Y=function(e){return fetch("".concat("","/teetime"),{method:"delete",credentials:"include",body:JSON.stringify({teeTime:e}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return W.dispatch(N(e))}),Object(r.a)({},D,{isLoading:!0})},W=Object(i.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;if(!t)return e;switch(t.type){case s.type:return Object(r.a)({},e,{isLoading:t.isLoading});case l.type:case m.type:return Object(r.a)({},u,{isLoading:t.isLoading});case h.type:case O.type:return Object(r.a)({},e,{isLoading:t.isLoading});case g.type:return Object(r.a)({},e,{currentDate:t.currentDate,teeTimeSearch:e.isSearching?e.teeTimeSearch:Object(r.a)({},e.teeTimeSearch,{date:{year:e.teeTimeSearch.date.year<t.currentDate.getFullYear()?t.currentDate.getFullYear():e.teeTimeSearch.date.year,month:e.teeTimeSearch.date.month<t.currentDate.getMonth()?t.currentDate.getMonth():e.teeTimeSearch.date.month,day:e.teeTimeSearch.date.day<t.currentDate.getDate()?t.currentDate.getDate():e.teeTimeSearch.date.day,dayOfTheWeek:e.teeTimeSearch.date.dayOfTheWeek<t.currentDate.getDay()?t.currentDate.getDay():e.teeTimeSearch.date.dayOfTheWeek,hours:e.teeTimeSearch.date.hours<t.currentDate.getHours()?t.currentDate.getHours():e.teeTimeSearch.date.hours,minutes:e.teeTimeSearch.date.minutes<t.currentDate.getMinutes()?t.currentDate.getMinutes():e.teeTimeSearch.date.minutes}})});case o.type:return Object(r.a)({},e,{teeTimeSearch:u.teeTimeSearch,isLoading:t.isLoading});case p.type:return Object(r.a)({},e,{selectedTeeTime:t.teeTime._id!==e.selectedTeeTime._id?t.teeTime:u.teeTimeSearch,teeTimeSearch:t.teeTime._id!==e.selectedTeeTime._id?t.teeTime:u.teeTimeSearch});case T.type:case D.type:return Object(r.a)({},e,{isLoading:t.isLoading});case E.type:return Object(r.a)({},e,{friendSearchTerm:t.friendSearchTerm});case y.type:return Object(r.a)({},e,{teeTimeSearch:e.selectedTeeTime._id?Object(r.a)({},e.selectedTeeTime,t.teeTimeSearch):t.teeTimeSearch});case v.type:return Object(r.a)({},e,{teeTimeSearch:e.isSearching?u.teeTimeSearch:{teeType:"",date:{year:(new Date).getFullYear(),month:0,day:0,hours:0,minutes:-1},golfers:[],guests:0},isSearching:!e.isSearching,selectedTeeTime:{}});case b.type:case S.type:case w.type:case d.type:return Object(r.a)({},e,{isLoading:t.isLoading});case f.type:return Object(r.a)({},e,{isLoading:t.isLoading,isAdmin:"admin"===t.data.user.userType,data:t.data,friendSearchTerm:"",selectedTeeTime:t.data.allTeeTimes.find(function(t){return t._id===e.selectedTeeTime._id})||e.selectedTeeTime});default:return e}},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());t.d=W}).call(this,a(43).Buffer)},41:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(26),c=a.n(i),u=(a(35),a(20)),s=a(50),o=a(47),l=a(8),m=a(9),d=a(12),f=a(10),h=a(11),p=(a(41),a(54)),g=a(4),T=a(51),E=a(52);function y(e){return r.a.createElement("div",{className:"LoadingPage"},r.a.createElement("img",{src:"./tee_shot.gif",alt:"taking a shot"}))}function v(e){return r.a.createElement("form",{className:"LoginPage",onSubmit:function(t){t.preventDefault(),e.loginUser({name:t.target.name.value,password:t.target.password.value})}},r.a.createElement("label",{value:"name",name:"name"},r.a.createElement("input",{type:"text",name:"name",placeholder:"name"})),r.a.createElement("label",{value:"password",name:"password"},r.a.createElement("input",{type:"password",name:"password",placeholder:"password"})),r.a.createElement("div",{className:"userLogin"},r.a.createElement("input",{type:"submit",value:"login"}),r.a.createElement("input",{type:"button",value:"register",onClick:function(t){e.data.allUsers.map(function(e){return e.name}).includes(t.target.form[0].value)||e.addUser({name:t.target.form[0].value,password:t.target.form[1].value,adminPassword:t.target.form[4].value,picture:null,userType:"basic"})}})),r.a.createElement("div",{className:"adminLogin"},r.a.createElement("input",{type:"password",placeholder:"admin password",name:"adminPassword"}),r.a.createElement("input",{type:"button",value:"register as admin",onClick:function(t){e.data.allUsers.map(function(e){return e.name}).includes(t.target.form[0].value)||e.addUser({name:t.target.form[0].value,password:t.target.form[1].value,adminPassword:t.target.form[4].value,picture:null,userType:"admin"})}})))}var b=a(53);function S(e){return r.a.createElement("div",{className:"NavBar"},r.a.createElement(b.a,{className:"navlink",exact:!0,to:"/"},r.a.createElement("img",{src:"./tee_hole.png",alt:"a golf ball on a tee"})),r.a.createElement(b.a,{className:"navlink",to:"/profile"},r.a.createElement("img",{src:e.data.user.pictureSrc,alt:"user profile"}),r.a.createElement("p",null,"".concat(e.data.user.name).concat(e.isAdmin?" - admin":""))),r.a.createElement(b.a,{className:"navlink",to:"/teetimes"},"Tee Times"),r.a.createElement(b.a,{className:"navlink",to:"/friends"},"Friends"),r.a.createElement("input",{type:"button",value:"Logout",onClick:function(t){return e.logoutUser(e.data.user)}}))}var w=a(13),O=a(28),D=a(2);function j(e){var t=e.teeTimeSearch.golfers&&e.teeTimeSearch.golfers.length||0,a=e.isAdmin?4-t:3-t,n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=e.teeTimeSearch.date,c=(e.selectedTeeTime._id||!e.isSearching)&&"".concat(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i.dayOfTheWeek],", ").concat(i.month+1,"-").concat(i.day,"-").concat(i.year,", ").concat(i.hours%12||12,":").concat(i.minutes>9?i.minutes:"0".concat(i.minutes)," ").concat(i.hours<12?"AM":"PM"),u=e.data.allTeeTimes.map(function(e){return new Date(e.date)}),s=e.isSearching?u:_(e).filter(function(e){return!u.includes(e)}),o=k(s),l=o.availableMonths,m=o.availableDays,d=o.availableHours,f=o.availableMinutes;return r.a.createElement("form",{className:"TeeTimeForm".concat(e.selectedTeeTime._id?" selectedTeeTimeForm":"").concat(e.isSearching?" searchingTeeTimes":""),onSubmit:function(t){t.preventDefault();var a=e.teeTimeSearch.date,n=[a.year,a.month,a.day,a.hours,a.minutes];e.selectedTeeTime._id||e.addTeeTime(Object(D.a)({},e.teeTimeSearch,{date:Object(O.a)(Date,n),golfers:Object(w.a)(e.teeTimeSearch.golfers)}))}},r.a.createElement("label",null,"Walk",r.a.createElement("input",{type:"checkbox",name:"walkride",value:"walk",checked:"walk"===e.teeTimeSearch.teeType,onChange:function(t){return C(t,e)}})),r.a.createElement("label",null,"Ride",r.a.createElement("input",{type:"checkbox",name:"walkride",value:"ride",checked:"ride"===e.teeTimeSearch.teeType,onChange:function(t){return C(t,e)}})),r.a.createElement("h4",null,"Select a date:"),e.isAdmin&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Year:",e.teeTimeSearch.date.year),r.a.createElement("label",null,"Month:",r.a.createElement("select",{name:"teeMonth",onChange:function(t){return C(t,e)}},l.map(function(e){return r.a.createElement("option",{key:e,value:e},"".concat(n[e]))})))),r.a.createElement("label",null,"Day:",r.a.createElement("select",{name:"teeDay",value:e.teeTimeSearch.date.day,onChange:function(t){return C(t,e)}},e.isSearching&&r.a.createElement("option",{value:"0"}," - "),m.map(function(e){return r.a.createElement("option",{key:e,value:e},"".concat(e))}))),r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Hour:",r.a.createElement("select",{name:"teeHour",value:e.teeTimeSearch.date.hours,onChange:function(t){return C(t,e)}},e.isSearching&&r.a.createElement("option",{value:"0"}," - "),d.map(function(e){return r.a.createElement("option",{key:e,value:e},"".concat(e%12||12," ").concat(e<12?"AM":"PM"))}))),r.a.createElement("label",null,"Minute:",r.a.createElement("select",{name:"teeMinute",value:e.teeTimeSearch.date.minutes,onChange:function(t){return C(t,e)}},e.isSearching&&r.a.createElement("option",{value:"-1"}," - "),f.map(function(e){return r.a.createElement("option",{key:e,value:e},"".concat(e.toString().length>1?e:"0".concat(e)))})))),r.a.createElement("h4",null,!(e.selectedTeeTime._id||e.isSearching)&&c),r.a.createElement("label",null,"Select other members:",r.a.createElement("select",{name:"golfers",multiple:!0,onChange:function(t){C(t,e)},value:e.teeTimeSearch.golfers},e.isAdmin||e.isSearching?e.data.allUsers.map(function(e){return r.a.createElement("option",{key:e._id,value:e._id},"".concat(e.name))}):e.data.userFriends.map(function(e){return r.a.createElement("option",{key:e._id,value:e._id},"".concat(e.name))}))),r.a.createElement("label",null,"Number of guests:",r.a.createElement("input",{type:"number",name:"guests",min:"0",max:a+1,value:e.teeTimeSearch.guests||0,onChange:function(t){return C(t,e)}}),!(e.selectedTeeTime._id||e.isSearching)&&r.a.createElement("input",{type:"submit",value:"Request Tee Time",onClick:function(t){return C(t,e)}})))}var _=function(e){for(var t=e.isAdmin,a=[],n=new Date,r=t?(new Date).getDate()+30:(new Date).getDate()+2;n.getDate()<r;)a.push(new Date(n)),n.setMinutes(n.getMinutes()+10);return a=a.map(function(t){var a=Object(g.h)(e.isAdmin,t),n=a.year,r=a.month,i=a.day,c=a.hours,u=a.minutes;return new Date(n,r,i,c,u)})},k=function(e){var t=[],a=[],n=[],r=[];return e.forEach(function(e){t.includes(e.getMonth())||t.push(e.getMonth()),a.includes(e.getDate())||a.push(e.getDate()),n.includes(e.getHours())||n.push(e.getHours()),r.includes(e.getMinutes())||r.push(e.getMinutes())}),t.sort(function(e,t){return e-t}),a.sort(function(e,t){return e-t}),n.sort(function(e,t){return e-t}),r.sort(function(e,t){return e-t}),{availableMonths:t,availableDays:a,availableHours:n,availableMinutes:r}},C=function(e,t){var a=e.target.checked&&e.target.value||(t.isSearching?"":t.teeTimeSearch.teeType),n=new Date,r=n.getFullYear(),i=t.isAdmin?parseInt(e.target.form.teeMonth.value):n.getMonth(),c=parseInt(e.target.form.teeDay.value);n.setDate(c);var u=n.getDay(),s=parseInt(e.target.form.teeHour.value),o=parseInt(e.target.form.teeMinute.value),l={year:r,month:i,day:c,dayOfTheWeek:u,hours:s,minutes:o},m=[],d=!0,f=!1,h=void 0;try{for(var p,g=e.target.form.golfers.selectedOptions[Symbol.iterator]();!(d=(p=g.next()).done);d=!0){var T=p.value;m.push(T.value)}}catch(S){f=!0,h=S}finally{try{d||null==g.return||g.return()}finally{if(f)throw h}}var E=(m=t.isAdmin||t.isSearching?m:[].concat(Object(w.a)(m),[t.data.user._id])).length,y=t.isAdmin?5-E:4-E,v=parseInt(e.target.form.guests.value),b={teeType:a,date:l,golfers:m,guests:v>y?y:v};t.updateTeeTimeSearch(b),t.selectedTeeTime._id&&t.updateTeeTime(Object(D.a)({},t.selectedTeeTime,b,{date:new Date(r,i,c,s,o)}))};function N(e){var t=e.teeTime,a=e.isPast,n=e.isSearching,i=t._id===e.selectedTeeTime._id?" selectedTeeTime":"",c=new Date(t.date),u=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"}).format(c);return r.a.createElement("div",{key:t._id,className:"teeTime".concat(i),onClick:a||n?null:function(a){"/teetimes"!==e.location.pathname?e.history.push("/teetimes"):e.selectTeeTime(t)}},r.a.createElement("p",null,u),r.a.createElement("p",null,t.teeType),r.a.createElement("p",null,t.golfers.filter(function(t){return e.isAdmin||t!==e.data.user._id}).map(function(t){return e.data.allUsers.find(function(e){return e._id===t}).name}).join(", ")),t.guests>0&&r.a.createElement("p",null,"".concat(t.guests," guests")),e.selectedTeeTime._id===t._id&&r.a.createElement("input",{type:"button",value:"Remove Tee Time",onClick:function(t){return e.deleteTeeTime(e.selectedTeeTime)}}))}function L(e){var t=new Date,a=e.isAdmin||e.isSearching?e.data.allTeeTimes:e.data.userTeeTimes;a.sort(function(e,t){return new Date(e.date).getTime()>new Date(t.date).getTime()?-1:1});var n,i=(a=e.isSearching?a.filter(function(t){var a=function(a){if("date"===a){var n=new Date(t[a]);n.setSeconds(0),n.setMilliseconds(0);var r=e.teeTimeSearch.date,i=r.year,c=r.month,u=r.day,s=r.hours,o=r.minutes,l=new Date(i,c||n.getMonth(),u||n.getDate(),s||n.getHours(),-1!==o?o:n.getMinutes());if(l.getTime()!==new Date(i,0,0,0,0).getTime()&&n.getTime()!==l.getTime())return{v:!1}}else if("golfers"===a){var m=t[a].filter(function(t){return e.teeTimeSearch[a].map(function(e){return e._id}).includes(t._id)});if(0!==e.teeTimeSearch.golfers.length&&0!==m.length)return{v:!1}}else{if(e.teeTimeSearch.teeType&&t.teeType!==e.teeTimeSearch.teeType)return{v:!1};if(e.teeTimeSearch.guests>t.guests)return{v:!1}}};for(var n in e.teeTimeSearch){var r=a(n);if("object"===typeof r)return r.v}return!0}):a).filter(function(e){return new Date(e.date)>t}),c=a.filter(function(e){return new Date(e.date)<=t});if(e.selectedTeeTime._id){var u=e.selectedTeeTime.date,s=u.year,o=u.month,l=u.day,m=u.hours,d=u.minutes;n=new Date(s,o,l,m,d)}return e.selectedTeeTime._id?r.a.createElement(N,Object.assign({teeTime:Object(D.a)({},e.selectedTeeTime,{date:n})},e)):r.a.createElement("div",{className:"UserTeeTimes"},r.a.createElement("div",{className:"teeSearchButton".concat(e.isSearching?" searchingTeeTimes":"")},r.a.createElement("input",{type:"button",value:"Tee Time Search",onClick:e.searchTeeTimes})),r.a.createElement("div",{className:"upcomingTeeTimes".concat(e.isSearching?" searchingTeeTimes":"")},r.a.createElement("h4",null,"Here is a list of your upcoming tee times!"),i.map(function(t){return r.a.createElement(N,Object.assign({key:t._id,isPast:!1,teeTime:t},e))})),r.a.createElement("div",{className:"completedTeeTimes".concat(e.isSearching?" searchingTeeTimes":"")},r.a.createElement("h4",null,"Here are your completed tee times!"),c.map(function(t){return r.a.createElement(N,Object.assign({key:t._id,isPast:!0,teeTime:t},e))})))}function F(e){var t=e.data.userFriends.map(function(e){return e._id}).includes(e.golfer._id),a=e.golfer.friendRequests.find(function(t){return t===e.data.user._id}),n=e.data.user.friendRequests.find(function(t){return t===e.golfer._id});return r.a.createElement("div",{className:"Friend"},r.a.createElement("img",{src:e.golfer.pictureSrc,alt:"User's friend ".concat(e.golfer.name)}),r.a.createElement("h4",null,e.golfer.name),!t&&n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"button",value:"approve friend",onClick:function(){return e.approveFriend({approvingFriend:e.data.user,approvedFriend:e.golfer})}}),r.a.createElement("input",{type:"button",value:"deny friend",onClick:function(){return e.denyFriend({denyingFriend:e.data.user,deniedFriend:e.golfer})}}))||!t&&(!a&&r.a.createElement("input",{type:"button",value:"request friend",onClick:function(){return e.requestFriend({requestingFriend:e.data.user,requestedFriend:e.golfer})}})||r.a.createElement("p",null,"friend requested")))}function M(e){var t=e.friends||e.data.allUsers;return r.a.createElement("div",{className:"Friends"},!e.friends&&r.a.createElement("div",{className:"searchFriends"},r.a.createElement("input",{type:"text",name:"friendName",placeholder:"friend's name",value:e.friendSearchTerm,onChange:function(t){return e.updateFriendSearch(t.target.value)},autoComplete:"off"})),r.a.createElement("div",{className:"friendsList"},t.filter(function(t){return t.name.includes(e.friendSearchTerm)&&t._id!==e.data.user._id}).map(function(t){return r.a.createElement(F,Object.assign({key:t._id,golfer:t},e))})))}var U=new WeakMap,P=function(e){if(U.has(e))return U.get(e);var t=URL.createObjectURL(e);return U.set(e,t),t},A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={newPassword:"",usernameSearchTerm:"",imageFile:null,imageLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=r.a.createElement("div",{className:"submitDiv"},r.a.createElement("label",null,"Current password:",r.a.createElement("input",{type:"password",name:"currentPassword",placeholder:"current password",autoComplete:"off"})),r.a.createElement("input",{type:"submit",value:"submit"}),r.a.createElement("input",{type:"reset",value:"reset"}));return r.a.createElement("form",{className:"Profile",onSubmit:function(a){a.preventDefault();var n=a.target.newUsername.value,r=a.target.currentPassword.value,i=a.target.newPassword.value;if(e.state.imageLoaded){var c=document.getElementById("myCanvas"),u=document.getElementById("myImage"),s=c.getContext("2d");console.log(u),s.drawImage(u,0,0,100,100),c.toBlob(function(e){var a=new FileReader;a.onload=function(){t.updateUser({_id:t.data.user._id,name:t.data.user.name,newUsername:n,currentPassword:r,newPassword:i,newPicture:a.result})},a.readAsBinaryString(e)},"image/png",.5)}else t.updateUser({_id:t.data.user._id,name:t.data.user.name,newUsername:n,currentPassword:r,newPassword:i,newPicture:""});e.setState({newPassword:"",usernameSearchTerm:"",imageFile:null,imageLoaded:!1}),a.target.newPicture.value=""},onReset:function(t){e.setState({newPassword:"",usernameSearchTerm:"",imageFile:null,imageloaded:!1}),t.target.newPicture.value=""}},r.a.createElement("div",{className:"changePicture"},r.a.createElement("label",null,"Change picture:",r.a.createElement("input",{type:"file",name:"newPicture",accept:"image/*",onFocus:function(){e.setState({usernameSearchTerm:"",newPassword:""})}}),this.state.imageLoaded&&r.a.createElement("canvas",{id:"myCanvas",width:100,height:100}),r.a.createElement("img",{id:"myImage",src:this.state.imageLoaded?P(this.state.imageFile):t.data.user.pictureSrc,alt:"uploaded profile",width:100,height:100})),r.a.createElement("input",{type:"button",value:"Upload",onClick:function(t){var a=t.target.form.newPicture.files[0],n=a&&!0;e.setState({imageFile:a,imageLoaded:n})}}),this.state.imageLoaded&&a),r.a.createElement("div",{className:"changeUsername"},r.a.createElement("label",null,"Current username:"," ".concat(t.data.user.name," ")),r.a.createElement("label",null,r.a.createElement("input",{type:"text",name:"newUsername",placeholder:"new username",value:this.state.usernameSearchTerm,onChange:function(t){e.setState({usernameSearchTerm:t.target.value})},autoComplete:"off",onFocus:function(t){e.setState({newPassword:""})}})),!t.data.allUsers.find(function(t){return t.name.toLowerCase()===e.state.usernameSearchTerm.toLowerCase()})&&this.state.usernameSearchTerm&&a),r.a.createElement("div",{className:"changePassword"},r.a.createElement("label",null,"Change password:",r.a.createElement("input",{type:"password",name:"newPassword",placeholder:"new password",value:this.state.newPassword,onChange:function(t){e.setState({newPassword:t.target.value})},onFocus:function(t){e.setState({usernameSearchTerm:""})},autoComplete:"off"})),this.state.newPassword&&a))}}]),t}(n.Component);function R(e){return r.a.createElement("div",{className:"Dashboard"},r.a.createElement(S,e),r.a.createElement(o.a,{exact:!0,path:"/",render:function(t){var a=new Date;e.data.userTeeTimes.sort(function(e,t){return new Date(e.date).getTime()<new Date(t.date).getTime()?-1:1});var n=e.data.userTeeTimes.find(function(e){return new Date(e.date)>a}),i=n?"Your next upcoming tee time is:":"Your last tee time was:",c=e.data.userTeeTimes[0],u=e.data.allUsers.filter(function(t){return e.data.user.friendRequests.includes(t._id)}),s=u.length>0?"You have ".concat(u.length," new friend requests."):"You have no new friend requests.";return r.a.createElement("div",{className:"statusMessages"},r.a.createElement("div",{className:"teeTimeStatus"},r.a.createElement("h4",null,i),n&&r.a.createElement(N,Object.assign({teeTime:n},e))||c&&r.a.createElement(N,Object.assign({teeTime:e.data.userTeeTimes[0]},e))||r.a.createElement("p",null,"No previous tee times. Click tee times to add one!"),!n&&r.a.createElement("h4",null,"Click Tee Times to make a new one!")),r.a.createElement("div",{className:"friendRequestStatus"},r.a.createElement("h4",null,s),r.a.createElement(M,Object.assign({friends:u},e)),r.a.createElement("p",null,"Click friends to add one!"),"}"))}}),r.a.createElement(o.a,{exact:!0,path:"/profile",render:function(t){return r.a.createElement("div",null,r.a.createElement(A,e))}}),r.a.createElement(o.a,{exact:!0,path:"/teetimes",render:function(t){return r.a.createElement("div",{className:"teeTimePage"},r.a.createElement(j,e),r.a.createElement(L,e))}}),r.a.createElement(o.a,{exact:!0,path:"/friends",render:function(t){return r.a.createElement(M,e)}}))}var I=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.requestData()}},{key:"render",value:function(){var e=this.props,t=e.data.user&&e.data.user._id;return!t&&"/login"!==e.location.pathname&&r.a.createElement(T.a,{to:"/login"})||t&&"/login"===e.location.pathname&&r.a.createElement(T.a,{to:"/"})||r.a.createElement("div",{className:"TeeTimes"},!t&&r.a.createElement("h1",null,"Tee Times"),e.isLoading&&r.a.createElement(y,null),r.a.createElement(E.a,null,r.a.createElement(o.a,{exact:!0,path:"/login",render:function(t){return r.a.createElement(v,e)}}),r.a.createElement(o.a,{path:"/",render:function(t){return r.a.createElement(R,e)}})))}}]),t}(n.Component),H=Object(u.b)(function(e){return e},function(e){return{addUser:function(t){e(g.b(t))},addTeeTime:function(t){e(g.a(t))},loginUser:function(t){e(g.i(t))},requestData:function(){e(g.k())},logoutUser:function(){e(g.j())},updateUser:function(t){e(g.r(t))},selectTeeTime:function(t){e(g.n(t))},updateTeeTime:function(t){e(g.p(t))},updateFriendSearch:function(t){e(g.o(t))},updateTeeTimeSearch:function(t){e(g.q(t))},searchTeeTimes:function(){e(g.m())},requestFriend:function(t){e(g.l(t))},approveFriend:function(t){e(g.c(t))},denyFriend:function(t){e(g.g(t))},deleteUser:function(t){e(g.f(t))},deleteTeeTime:function(t){e(g.e(t))}}}),q=Object(p.a)(H(I)),x=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(q,null))}}]),t}(n.Component),J=function(e){var t=e.store;return r.a.createElement(u.a,{store:t},r.a.createElement(s.a,null,r.a.createElement(o.a,{path:"/:filter?",component:x})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(J,{store:g.d}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,2,1]]]);
//# sourceMappingURL=main.668d58f9.chunk.js.map